(()=>{"use strict";const e="health_tip_info";async function n(e){if(!e.interval||!e.content)return!1;window.currentTab||(window.currentTab=await new Promise((e=>{chrome.tabs.getSelected(null,(n=>{e(n||null)}))})));const{url:n="",id:t}=window.currentTab||{};n.includes("chrome://")||(t&&t>0&&chrome.tabs.executeScript(t,{file:"dist/content.js"}),t&&t>0&&chrome.tabs.insertCSS(t,{file:"src/content/index.css"}))}window.currentTab=null,chrome.tabs.onSelectionChanged.addListener((function(e,n){chrome.tabs.query({},(n=>{const t=n.find((n=>n.id===e));window.currentTab=t}))})),chrome.runtime.onMessage.addListener((async t=>{const{msgType:i,data:r}=t;var o;await(e,o=r,void chrome.storage.local.set({health_tip_info:o},undefined)),"config_success"===i&&r?(window.timer&&(clearInterval(window.timer),window.timer=null),n(r),window.timer=setInterval((()=>{n(r)}),r.interval)):"config_reset"===i&&(window.timer&&(clearInterval(window.timer),window.timer=null),chrome.storage.local.remove("health_tip_info",(()=>{console.log("配置重置成功")})))}))})();